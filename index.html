
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Fugiman</title>
	<meta name="author" content="Chris "Fugiman" Gamble">

	
	<meta name="description" content="alternatively: ClickQuest and Cookie Clicker, A tale of two games that start with a single click Before I start, I recommend you at least glance at &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Fugiman" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Fugiman</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/resume">Resume</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/resume">Resume</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:fugiman.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/Fugiman" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/Fugiman" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:fugiman.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/17/on-click-fueled-javascript-games/">
		
			On Click-fueled Javascript Games</a>
	</h2>
	<div class="entry-content">
		<p><em>alternatively: ClickQuest and Cookie Clicker, A tale of two games that start with a single click</em></p>

<p>Before I start, I recommend you at least glance at the games for a minute or two.<br/>
<a href="http://www.clickquest.net/">http://www.clickquest.net/</a><br/>
<a href="http://orteil.dashnet.org/experiments/cookie/">http://orteil.dashnet.org/experiments/cookie/</a></p>

<p>I made ClickQuest almost exactly 3 years ago, far past the time required for me to regret every line of code I wrote.
However, I did learn quite a few things in its bug-riddled construction, and many things in the years of reflection afterwards.
ClickQuest was originally marketed as &ldquo;distilling an MMORPG into its most core mechanic &ndash; click and numbers go up&rdquo;.
Indeed, Cookie Clicker takes this a step further: Click to increase a number that you can decrease to increase faster.
It is the most instant of gratification, a split second is all it takes.</p>

<p>However, while this makes the games extremely good for single-player, it makes it incredibly hard for multiplayer.
If you play by yourself, there is no reason to cheat, as all you do is lower your own enjoyment.
When multiplayer (more specifically a leaderboard) is introduced, then players are motivated to cheat.
In MMORPGs the layers of abstraction provide a mechanism to defeat cheating.
But in clicking games, we&rsquo;ve peeled away those layers, and so our only action in the game is clicking.
This is the biggest strength and greatest weakness in clicking games.</p>

<p>When I made ClickQuest, it was designed with a leaderboard and chat in mind.
I knew that cheating would be a big concern, so I tried to proactively thwart it.
Here&rsquo;s what I tried in order of when I tried it.</p>

<h3>Approach 1: Send every click to the server</h3>

<p>This worked great in testing.
If I saw every click then nobody could fake it, right?
In reality, this just changed cheating from faking clicks to spamming my server with HTTP requests.
And when your game generates a request for every click, you&rsquo;ve just invented a way to DDOS your own server.
Oops.</p>

<h3>Approach 2: Rate limit clicks client-side</h3>

<p>I changed the client to only accept a click when 60ms had passed since the last click.
I found this was a reasonable upper bound for how fast a human can click a mouse, even with a mouse in each hand alternating clicks.
(Yes, I had some hardcore players.)
But this just slows down the cheater, assuming they don&rsquo;t go past it straight to the server.</p>

<h3>Approach 3: Obfusicate the request payload</h3>

<p>Aha, if players can bypass the client to cheat, I need to force them to use the client.
Simple! Make the packet sent from the client to the server super special secret so that they can&rsquo;t duplicate it!
And of course, obfusicate my javascript so they can&rsquo;t find out how I do it!
A great idea in theory, but it is <a href="http://jsbeautifier.org/">pretty trivial to unpack javascript</a>.
In reality, this did nothing.</p>

<h3>Approach 4: Track as many metrics as I can and figure out where they should be server-side</h3>

<p>Finally, a proper solution.
I kept track of how many clicks per second a user made whenever they made a request to the server.
I&rsquo;d then compare that to how many clicks per second they&rsquo;d made in the past 100 requests.
If your clicking was consistently close to the 60ms per click mark, I&rsquo;d give them a strike.
Likewise if they clicked faster than 60ms mark, or if they were clicking at the same rate constantly.
This actually led to catching bots, but unfortunately it had too many false positives and had to be turned off.</p>

<h3>Approach 5: Give up and let it happen</h3>

<p>By this point I&rsquo;d spent 6 months and had no idea what else I could do.
It is extremely difficult to regulate pure clicks.
If I were to attempt it today, I&rsquo;d use the efficiency of websockets to combine approach 1 and 4.
I&rsquo;d log the location and time of every click for every user, and use that to try and weed out (poorly designed) bots.
But even that would likely fail.
The developer simply lacks enough information to properly prevent cheating.</p>

<h3>But Cookie Clicker is different than ClickQuest!</h3>

<p>Orteil has added back a layer of abstraction in the form of buyable cookie producers.
Now, past a certain point, it&rsquo;s the buildings producing 99% of the cookies &ndash; clicking is irrelevant.
Using my numbers a player can legitimately acquire 20 cookies per second from clicking.
If you open a websocket connection for each player, you can track whether they have the page open or not.
Then, send a packet every 30 seconds, or on building purchase (whichever happens first).
Each packet would have the number of cookies and each type of building.
You can verify the buildings with stored data, and the cookies with simple arithmetic.
Boom, cheating solved!</p>

<p>But not quite.
You&rsquo;ve just slowed botting down to human levels.
Like an MMORPG, it&rsquo;s possible to bot as long as you play by the rules.
From here, you&rsquo;d have to use browser fingerprinting, or other esoteric metrics to weed out bots.
Just remember, the stricter your anti-cheat protection is, the likely you are to anger your legitimate players!</p>

<h3>A few parting thoughts</h3>

<p>I love javascript clicking games.
They seem extremly simple, but can hide great ingenuity.
(Also, they ease my pain of not knowing flash).
But I feel you need to know what you&rsquo;re getting into when making one.
Unlike flash, or a desktop app, it&rsquo;s easy for the most basic of programmer to read your entire source code.
A little mucking around in dev tools and they can pry your game apart.
I find this a great thing, as it allows others to learn from what they find, but it can lead to the problems I mentioned above.
Again, just know the limitations of your platform.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-08-17T04:35:00+00:00" pubdate data-updated="true">Aug 17<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/games/'>games</a>


</div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/10/they-say-the-first-step-is-the-hardest-dot-dot-dot/">
		
			They Say the First Step Is the Hardest&#8230;</a>
	</h2>
	<div class="entry-content">
		<p>I&rsquo;ve been a web developer for many years now, and during that time I&rsquo;ve never really had a site of my own.
It always struck me as odd that for someone whose daily routine consisted of making websites, I couldn&rsquo;t even make one for myself.
The sites I made were for a purpose &ndash; they provided a service or a piece of information &ndash; and I couldn&rsquo;t figure out what the purpose of a personal site would be.
Last year I made a single page site as a portfolio, and I was immediately disgusted with it.
I&rsquo;m a developer, not a designer.
The representation of myself as an artist instead of a problem solver just didn&rsquo;t feel right.
So I deleted it and returned to having nothing to say &ldquo;This is me&rdquo;.</p>

<p>Over the past year I&rsquo;ve more firmly integrated myself into the open source world.
I started heavily using github, and began to collaborate with others.
As a part of this process, I found many interesting programmers who were much smarter than me.
They all had one thing in common, they had a blog.
A few days ago, I found a blog post saying that &ldquo;comments are a facade fooling people into thinking they have a voice. They don&rsquo;t. You only have a voice if you have a blog.&rdquo;
While perhaps a bit extreme of a claim, it made me realize that comments are much like posting anonymously: It&rsquo;s very unlikely that people will use it to build an image of you.
Your comments are spread over many websites, sometimes with different usernames.
It&rsquo;s hard for people to build them into a complete picture of you, unless they are the NSA.
A blog, on the other hand, is a monolithic compendium of who you are.
If somebody reads your blog, they can build an image of the kind of person you are.
Perhaps a flawed and incomplete image, but an image nonetheless.</p>

<p>And there I had my answer.
A portfolio is silly, I can just link you to what I&rsquo;ve made.
After all, they are websites.
A blog is the way for me to actually share the struggles I have, what I learn from them, and hopefully I can teach you something as well.
And just maybe, it&rsquo;ll lead to me being a better programmer.
I look forward to seeing what comes of it.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-08-10T01:49:00+00:00" pubdate data-updated="true">Aug 10<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/life/'>life</a>


</div>
	
</div>
</article>

<nav id="pagenavi">
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Chris "Fugiman" Gamble

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->




	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-43089007-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>